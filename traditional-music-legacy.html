<script>
    document.addEventListener('DOMContentLoaded', () => {
        const cardItems = document.querySelectorAll('.card-item');
        const videoModal = document.getElementById('videoModal');
        const iframeContainer = document.getElementById('iframeContainer');
        const closeModalBtn = document.getElementById('closeModal');

        // 모달을 닫는 함수
        const closeModal = () => {
            videoModal.classList.remove('active');
            // iframe을 제거하여 비디오 재생을 중지합니다.
            iframeContainer.innerHTML = '';
        };

        // 각 카드에 클릭 이벤트 추가
        cardItems.forEach(card => {
            card.addEventListener('click', () => {
                const videoId = card.dataset.videoId;
                // 유튜브 임베드 URL 완성 (자동 재생 옵션 추가)
                const youtubeEmbedUrl = `https://www.youtube.com/embed/${videoId}?autoplay=1`;
                
                // iframe 컨테이너에 유튜브 영상 추가
                iframeContainer.innerHTML = `
                    <iframe src="${youtubeEmbedUrl}" 
                            frameborder="0" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                            allowfullscreen>
                    </iframe>`;
                
                // 모달을 활성화하여 화면에 표시
                videoModal.classList.add('active');
            });
        });

        // 닫기 버튼 클릭 시 모달 닫기
        closeModalBtn.addEventListener('click', closeModal);

        // 모달 배경 클릭 시 모달 닫기
        videoModal.addEventListener('click', (event) => {
            // 클릭된 요소가 모달 배경(modal-overlay)일 경우에만 닫기
            if (event.target === videoModal) {
                closeModal();
            }
        });
    });
</script>
